<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maternity Benefit Form</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center">
    <div class="bg-white shadow-lg rounded-lg p-6 w-full max-w-4xl">
        <h1 class="text-2xl font-bold mb-6 text-center">Maternity Benefit Form</h1>
        <form id="maternityForm" class="space-y-6">
            <!-- Employee Information -->
            <fieldset class="border border-gray-300 rounded p-4">
                <legend class="text-lg font-semibold">Employee Information</legend>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label for="employeeName" class="block text-sm font-medium text-gray-700">Name of Employee</label>
                        <input type="text" id="employeeName" required class="mt-1 block w-full p-2 border border-gray-300 rounded-md">
                    </div>
                    <div>
                        <label for="employeeId" class="block text-sm font-medium text-gray-700">ID No.</label>
                        <input type="text" id="employeeId" required class="mt-1 block w-full p-2 border border-gray-300 rounded-md">
                    </div>
                    <div>
                        <label for="cardNo" class="block text-sm font-medium text-gray-700">Card No.</label>
                        <input type="text" id="cardNo" class="mt-1 block w-full p-2 border border-gray-300 rounded-md">
                    </div>
                    <div>
                        <label for="designation" class="block text-sm font-medium text-gray-700">Designation</label>
                        <input type="text" id="designation" class="mt-1 block w-full p-2 border border-gray-300 rounded-md">
                    </div>
                    <div>
                        <label for="category" class="block text-sm font-medium text-gray-700">Category</label>
                        <input type="text" id="category" class="mt-1 block w-full p-2 border border-gray-300 rounded-md">
                    </div>
                    <div>
                        <label for="section" class="block text-sm font-medium text-gray-700">Section</label>
                        <input type="text" id="section" class="mt-1 block w-full p-2 border border-gray-300 rounded-md">
                    </div>
                    <div>
                        <label for="dateOfJoining" class="block text-sm font-medium text-gray-700">Date of Joining</label>
                        <input type="date" id="dateOfJoining" class="mt-1 block w-full p-2 border border-gray-300 rounded-md">
                    </div>
                    <div>
                        <label for="monthlySalary" class="block text-sm font-medium text-gray-700">Monthly Salary (BDT)</label>
                        <input type="number" id="monthlySalary" class="mt-1 block w-full p-2 border border-gray-300 rounded-md">
                    </div>
                </div>
            </fieldset>

            <!-- Medical history & duration of maternity leave -->
            <fieldset class="border border-gray-300 rounded p-4">
                <legend class="text-lg font-semibold">Medical history & duration of maternity leave</legend>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label for="dateOfSymptom" class="block text-sm font-medium text-gray-700">Date of Symptom</label>
                        <input type="date" id="dateOfSymptom" class="mt-1 block w-full p-2 border border-gray-300 rounded-md">
                    </div>
                    <div>
                        <label for="estimatedDeliveryDate" class="block text-sm font-medium text-gray-700">Estimated Delivery Date</label>
                        <input type="date" id="estimatedDeliveryDate" class="mt-1 block w-full p-2 border border-gray-300 rounded-md">
                    </div>
                    <div>
                        <label for="maternityLeaveStartDate" class="block text-sm font-medium text-gray-700">Maternity Leave Start Date</label>
                        <input type="date" id="maternityLeaveStartDate" class="mt-1 block w-full p-2 border border-gray-300 rounded-md">
                    </div>
                    <div>
                        <label for="maternityLeaveEndDate" class="block text-sm font-medium text-gray-700">Maternity Leave End Date</label>
                        <input type="date" id="maternityLeaveEndDate" class="mt-1 block w-full p-2 border border-gray-300 rounded-md">
                    </div>
                </div>
            </fieldset>

            <!-- History of Last Month's Attendance & Take-Home Salary -->
            <fieldset class="border border-gray-300 rounded p-4">
                <legend class="text-lg font-semibold">History of Last Month's Attendance & Take-Home Salary</legend>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                    <label for="attendanceDays" class="block text-sm font-medium text-gray-700">Days of Attendance</label>
                    <input type="number" id="attendanceDays" class="mt-1 block w-full p-2 border border-gray-300 rounded-md">
                    </div>
                    <div>
                        <label for="lastMonthSalary" class="block text-sm font-medium text-gray-700">Salary (BDT)</label>
                        <input type="number" id="lastMonthSalary" oninput="updateTotalIncome()" class="mt-1 block w-full p-2 border border-gray-300 rounded-md">
                    </div>
                    <div>
                        <label for="bonus" class="block text-sm font-medium text-gray-700">Bonus (BDT)</label>
                        <input type="number" id="bonus" oninput="updateTotalIncome()" class="mt-1 block w-full p-2 border border-gray-300 rounded-md">
                    </div>
                    <div>
                        <label for="others" class="block text-sm font-medium text-gray-700">Others (if any)</label>
                        <input type="number" id="others" oninput="updateTotalIncome()" class="mt-1 block w-full p-2 border border-gray-300 rounded-md">
                    </div>
                    <div>
                        <label for="totalIncome" class="block text-sm font-medium text-gray-700">Total Income (BDT)</label>
                        <input type="number" id="totalIncome" readonly class="mt-1 block w-full p-2 border border-gray-300 rounded-md bg-gray-100">
                    </div>
                    <div>
                        <label for="dailyAverage" class="block text-sm font-medium text-gray-700">Daily Average Amount of Taka</label>
                        <input type="number" id="dailyAverage" readonly class="mt-1 block w-full p-2 border border-gray-300 rounded-md bg-gray-100">
                    </div>
                </div>
            </fieldset>
            <!-- Details of Maternity Benefit -->
            <fieldset class="border border-gray-300 rounded p-4">
                <legend class="text-lg font-semibold">Details of Maternity Benefit</legend>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label for="installmentNo" class="block text-sm font-medium text-gray-700">Installment No.</label>
                        <input type="number" id="installmentNo" class="mt-1 block w-full p-2 border border-gray-300 rounded-md">
                    </div>
                    <div>
                        <label for="eligibleDays" class="block text-sm font-medium text-gray-700">Eligible for how many days</label>
                        <input type="number" id="eligibleDays" oninput="updatePayableAmount()" class="mt-1 block w-full p-2 border border-gray-300 rounded-md">
                    </div>
                    <div>
                        <label for="payableAmount" class="block text-sm font-medium text-gray-700">Payable Amount (Taka)</label>
                        <input type="number" id="payableAmount" readonly class="mt-1 block w-full p-2 border border-gray-300 rounded-md bg-gray-100">
                    </div>
                </div>
            </fieldset>
            <!-- Current Month's Payable Salary -->
            <fieldset class="border border-gray-300 rounded p-4">
                <legend class="text-lg font-semibold">Current Month's Payable Salary</legend>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label for="currentAttendanceDays" class="block text-sm font-medium text-gray-700">Days of Attendance</label>
                        <input type="number" id="currentAttendanceDays" class="mt-1 block w-full p-2 border border-gray-300 rounded-md">
                    </div>
                    <div>
                        <label for="currentSalary" class="block text-sm font-medium text-gray-700">Salary (BDT)</label>
                        <input type="number" id="currentSalary" oninput="updateCurrentTotalSalary()" class="mt-1 block w-full p-2 border border-gray-300 rounded-md">
                    </div>
                    <div>
                        <label for="currentBonus" class="block text-sm font-medium text-gray-700">Bonus (BDT)</label>
                        <input type="number" id="currentBonus" oninput="updateCurrentTotalSalary()" class="mt-1 block w-full p-2 border border-gray-300 rounded-md">
                    </div>
                    <div>
                        <label for="currentOthers" class="block text-sm font-medium text-gray-700">Others (if any)</label>
                        <input type="number" id="currentOthers" oninput="updateCurrentTotalSalary()" class="mt-1 block w-full p-2 border border-gray-300 rounded-md">
                    </div>
                    <div>
                        <label for="currentTotalSalary" class="block text-sm font-medium text-gray-700">Total Salary (BDT)</label>
                        <input type="number" id="currentTotalSalary" readonly class="mt-1 block w-full p-2 border border-gray-300 rounded-md bg-gray-100">
                    </div>

                </div>
            </fieldset>

            <!-- Total Payable Amount -->
            <fieldset class="border border-gray-300 rounded p-4">
                <legend class="text-lg font-semibold">Total Payable Amount</legend>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label for="totalPayableDigit" class="block text-sm font-medium text-gray-700">In Digit (BDT)</label>
                        <input type="number" id="totalPayableDigit" readonly class="mt-1 block w-full p-2 border border-gray-300 rounded-md bg-gray-100">
                    </div>
                    <div>
                        <label for="totalPayableWord" class="block text-sm font-medium text-gray-700">In Word</label>
                        <input type="text" id="totalPayableWord" readonly class="mt-1 block w-full p-2 border border-gray-300 rounded-md bg-gray-100">
                    </div>
                </div>
            </fieldset>

            
            <div class="flex justify-end mt-6">
                <button type="button" onclick="submitForm()" class="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600">Generate Bill</button>
            </div>
        </form>
    </div>

    <script>
            function updateTotalIncome() {
    const salary = parseFloat(document.getElementById('lastMonthSalary').value) || 0;
    const bonus = parseFloat(document.getElementById('bonus').value) || 0;
    const others = parseFloat(document.getElementById('others').value) || 0;
    const attendanceDays = parseInt(document.getElementById('attendanceDays').value) || 0;

    // Calculate total income
    const totalIncome = salary + bonus + others;
    document.getElementById('totalIncome').value = totalIncome.toFixed(2);

    // Calculate daily average
    const dailyAverage = attendanceDays > 0 ? totalIncome / attendanceDays : 0;
    document.getElementById('dailyAverage').value = dailyAverage.toFixed(2);

    // Update payable amount based on new daily average
    updatePayableAmount();
}

function updateCurrentTotalSalary() {
    const currentSalary = parseFloat(document.getElementById('currentSalary').value) || 0;
    const currentBonus = parseFloat(document.getElementById('currentBonus').value) || 0;
    const currentOthers = parseFloat(document.getElementById('currentOthers').value) || 0;

    // Calculate total salary
    const currentTotalSalary = currentSalary + currentBonus + currentOthers;
    document.getElementById('currentTotalSalary').value = currentTotalSalary.toFixed(2);

    // Update total payable amount based on new current salary
    updateTotalPayableAmount();
}

function updatePayableAmount() {
    const dailyAverage = parseFloat(document.getElementById('dailyAverage').value) || 0;
    const eligibleDays = parseInt(document.getElementById('eligibleDays').value) || 0;

    // Calculate payable amount
    const payableAmount = dailyAverage * eligibleDays;
    document.getElementById('payableAmount').value = payableAmount.toFixed(2);

    // Update total payable amount based on new payable amount
    updateTotalPayableAmount();
}

function updateTotalPayableAmount() {
    const payableAmount = parseFloat(document.getElementById('payableAmount').value) || 0;
    const currentTotalSalary = parseFloat(document.getElementById('currentTotalSalary').value) || 0;

    // Calculate total payable amount
    const totalPayableAmount = payableAmount + currentTotalSalary;

    // Update fields
    document.getElementById('totalPayableDigit').value = totalPayableAmount.toFixed();
    document.getElementById('totalPayableWord').value = convertNumberToWords(totalPayableAmount);
}

// Utility function for converting numbers to words
function convertNumberToWords(num) {
    // Add number-to-words conversion logic (already in your script).
}

// Event Listeners
document.addEventListener('DOMContentLoaded', () => {
    document.getElementById('lastMonthSalary').addEventListener('input', updateTotalIncome);
    document.getElementById('bonus').addEventListener('input', updateTotalIncome);
    document.getElementById('others').addEventListener('input', updateTotalIncome);
    document.getElementById('attendanceDays').addEventListener('input', updateTotalIncome);

    document.getElementById('eligibleDays').addEventListener('input', updatePayableAmount);

    document.getElementById('currentSalary').addEventListener('input', updateCurrentTotalSalary);
    document.getElementById('currentBonus').addEventListener('input', updateCurrentTotalSalary);
    document.getElementById('currentOthers').addEventListener('input', updateCurrentTotalSalary);
});


        // Function to convert numbers to words
        function convertNumberToWords(num) {
    const a = [
        "", "one", "two", "three", "four", "five", "six", "seven", "eight", "nine",
        "ten", "eleven", "twelve", "thirteen", "fourteen", "fifteen", "sixteen", "seventeen", "eighteen", "nineteen"
    ];
    const b = [
        "", "", "twenty", "thirty", "forty", "fifty", "sixty", "seventy", "eighty", "ninety"
    ];
    const unit = ["", "thousand", "lakh", "crore"];

    if (num === 0) return "zero";

    let words = [];
    const [integerPart, decimalPart] = num.toString().split(".");

    // Convert integer part
    let n = parseInt(integerPart);
    let u = 0;
    while (n > 0) {
        const chunk = n % 1000;
        if (chunk !== 0) {
            const chunkWords = [];
            const hundreds = Math.floor(chunk / 100);
            const remainder = chunk % 100;

            if (hundreds > 0) chunkWords.push(a[hundreds] + " hundred");
            if (remainder > 0) {
                if (remainder < 20) {
                    chunkWords.push(a[remainder]);
                } else {
                    const tens = Math.floor(remainder / 10);
                    const units = remainder % 10;
                    chunkWords.push(b[tens] + (units > 0 ? " " + a[units] : ""));
                }
            }
            words.unshift(chunkWords.join(" ") + " " + unit[u]);
        }
        u++;
        n = Math.floor(n / 1000);
    }

    // Convert decimal part, if any
    if (decimalPart && parseInt(decimalPart) > 0) {
        words.push("and");
        const decimalWords = decimalPart
            .split("")
            .map((digit) => a[parseInt(digit)])
            .join(" ");
        words.push(decimalWords + " paisa");
    }

    return words.join(" ").trim();
}




        function submitForm() {
            // Collect data
            const data = {
                employeeName: document.getElementById('employeeName').value,
                employeeId: document.getElementById('employeeId').value,
                cardNo: document.getElementById('cardNo').value,
                designation: document.getElementById('designation').value,
                category: document.getElementById('category').value,
                section: document.getElementById('section').value,
                dateOfJoining: document.getElementById('dateOfJoining').value,
                monthlySalary: document.getElementById('monthlySalary').value,
                dateOfSymptom: document.getElementById('dateOfSymptom').value,
                estimatedDeliveryDate: document.getElementById('estimatedDeliveryDate').value,
                maternityLeaveStartDate: document.getElementById('maternityLeaveStartDate').value,
                maternityLeaveEndDate: document.getElementById('maternityLeaveEndDate').value,
                lastMonthSalary: document.getElementById('lastMonthSalary').value,
                bonus: document.getElementById('bonus').value,
                others: document.getElementById('others').value,
                totalIncome: document.getElementById('totalIncome').value,
                dailyAverage: document.getElementById('dailyAverage').value,
                attendanceDays: document.getElementById('attendanceDays').value,
                installmentNo: document.getElementById('installmentNo').value,
                eligibleDays: document.getElementById('eligibleDays').value,
                payableAmount: document.getElementById('payableAmount').value,
                currentAttendanceDays: document.getElementById('currentAttendanceDays').value,
                currentSalary: document.getElementById('currentSalary').value,
                currentBonus: document.getElementById('currentBonus').value,
                currentOthers: document.getElementById('currentOthers').value,
                currentTotalSalary: document.getElementById('currentTotalSalary').value,
                totalPayableDigit: document.getElementById('totalPayableDigit').value,
                totalPayableWord: document.getElementById('totalPayableWord').value,
            };

            // Store data in localStorage
            localStorage.setItem('formData', JSON.stringify(data));

            // Open the result page
            window.open('result.html', '_blank');
        }
    </script>
</body>
</html>
